<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="utf-8">
        <link href="../static/d3-geomap-2.0.0/css/d3.geomap.css" rel="stylesheet">
        <script src="../static/d3-geomap-2.0.0/vendor/d3.geomap.dependencies.min.js"></script>
        <script src="../static/d3-geomap-2.0.0/js/d3.geomap.min.js"></script>
        <script src="../static/d3.min.js"></script>
    </head>
    <body>
        <div id="map"></div>
        <script>
            var format = function(d) {
                d = d / 1000000;
                return d3.format(',.02f')(d) + 'M';
            }

            // Creates a choropleth map, loads the geofile, select the column properly
            // Do not change unitId
            var map = d3.geomap.choropleth()
                .geofile('../static/d3-geomap-2.0.0/topojson/world/countries.json')
                .colors(colorbrewer.YlGnBu[9])
                .column('X1_en')
                .format(format)
                .legend(true)
                .unitId('name');

            // Loads the csv file needed
            d3.csv('../static/d3-geomap-2.0.0/topojson/dataset/data_1850.csv', function(error, data) {
                var selection = d3.select('#map').datum(data);
                map.draw(selection);
            });

        </script>
    </body>
</html>